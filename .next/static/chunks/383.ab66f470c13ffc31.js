"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[383],{4383:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var o=r(5155),a=r(2115);r(4209);let n=[{name:"Miami Beach, Florida",coordinates:[-80.1918,25.7617],title:"Undervalued Beachfront Duplex",price:"$4M - $5M",size:"3,200 sqft - 4000sqft",tags:["Oceanfront","Gated Community","High-Rise Security"],image:"https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400&h=300&fit=crop"},{name:"Tampa, Florida",coordinates:[-82.4572,27.9506],title:"Modern Waterfront Villa",price:"$3M - $4M",size:"2,800 sqft - 3500sqft",tags:["Waterfront","Pool","Smart Home"],image:"https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=400&h=300&fit=crop"},{name:"Orlando, Florida",coordinates:[-81.3792,28.5383],title:"Luxury Estate with Golf Course",price:"$2M - $3M",size:"4,000 sqft - 5000sqft",tags:["Golf Course","Gated","Resort Style"],image:"https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=400&h=300&fit=crop"},{name:"Jacksonville, Florida",coordinates:[-81.6557,30.3322],title:"Riverfront Family Home",price:"$1.5M - $2M",size:"3,000 sqft - 3800sqft",tags:["Riverfront","Large Yard","Family Friendly"],image:"https://images.unsplash.com/photo-1605276374104-dee2a0ed3cd6?w=400&h=300&fit=crop"},{name:"Tallahassee, Florida",coordinates:[-84.2807,30.4383],title:"Historic Downtown Mansion",price:"$1M - $1.5M",size:"3,500 sqft - 4200sqft",tags:["Historic","Downtown","Classic"],image:"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=400&h=300&fit=crop"},{name:"Fort Lauderdale, Florida",coordinates:[-80.1373,26.1224],title:"Canal-Front Modern Home",price:"$3.5M - $4.5M",size:"3,300 sqft - 4100sqft",tags:["Canal Access","Boat Dock","Modern"],image:"https://images.unsplash.com/photo-1600047509807-ba8f99d2cdde?w=400&h=300&fit=crop"},{name:"St. Petersburg, Florida",coordinates:[-82.6403,27.7706],title:"Beach Bungalow Paradise",price:"$2.5M - $3.5M",size:"2,500 sqft - 3200sqft",tags:["Beach Access","Renovated","Tropical"],image:"https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea?w=400&h=300&fit=crop"},{name:"Naples, Florida",coordinates:[-81.7948,26.142],title:"Golf Community Estate",price:"$4.5M - $5.5M",size:"4,500 sqft - 5500sqft",tags:["Golf Course","Luxury","Country Club"],image:"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=400&h=300&fit=crop"},{name:"Key West, Florida",coordinates:[-81.78,24.5551],title:"Island Paradise Retreat",price:"$5M - $6M",size:"2,200 sqft - 3000sqft",tags:["Island Living","Private Beach","Tropical"],image:"https://images.unsplash.com/photo-1600585154526-990dced4db0d?w=400&h=300&fit=crop"},{name:"Pensacola, Florida",coordinates:[-87.2169,30.4213],title:"Coastal Contemporary Home",price:"$1.8M - $2.5M",size:"3,100 sqft - 3900sqft",tags:["Beachfront","Contemporary","Open Concept"],image:"https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800&h=600&fit=crop&q=80"}];var s=r(4606),i=r.n(s);let l={INITIAL_CENTER:[-81.5158,27.6648],INITIAL_ZOOM:4.5,MIN_ZOOM:5,MAX_ZOOM:18},c={DARK_BACKGROUND:"#0a1132",FLORIDA_FILL:"#163552",OUTLINE_SHADOW:"#0a1f35",OUTLINE_HIGHLIGHT:"#76c8fe",OUTLINE_CORE:"#005a71"},d={DARK_MASK:.85,FLORIDA_FILL:.3,OUTLINE_SHADOW:.8,OUTLINE_HIGHLIGHT:.45,OUTLINE_MAIN:.9},u={OUTLINE_SHADOW:3,OUTLINE_HIGHLIGHT:1.2,OUTLINE_MAIN:.65},p={SHADOW:1,HIGHLIGHT:-1},f={RADIUS:7.5,RADIUS_SELECTED:10,STROKE_WIDTH:3.5,STROKE_WIDTH_SELECTED:4,OUTER_RING_RADIUS:16,OUTER_RING_RADIUS_SELECTED:20,FLY_TO_ZOOM:9,FLY_TO_DURATION:1500,FLY_TO_CURVE:1.4},m={FILL:"#006d80",FILL_OPACITY:1,STROKE:"#9aadd0",STROKE_OPACITY:1,GLOW:"#006d80",GLOW_OPACITY:.3,SELECTED_FILL:"#006d80",SELECTED_FILL_OPACITY:1,SELECTED_GLOW:"#006d80",SELECTED_GLOW_OPACITY:.5},h=[[-180,-90],[180,-90],[180,90],[-180,90],[-180,-90]];var g=r(5704),y=r(454),x=r(5239);function L(e){let{property:t,isSelected:r=!1,onClick:a}=e;return(0,o.jsxs)("div",{onClick:a,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==a||a())},tabIndex:0,role:"button","aria-pressed":r,className:"\n        bg-p10-blue-dark rounded-md overflow-hidden shadow-md cursor-pointer\n        transition-all duration-300 ease-out focus:outline-none focus-visible:ring-2 focus-visible:ring-p10-blue-munsell\n        ".concat(r?"ring-2 ring-p10-blue-munsell shadow-lg shadow-p10-blue-munsell/20 scale-[1.02]":"hover:ring-1 hover:ring-p10-maya/50 hover:shadow-lg hover:scale-[1.01]","\n      "),children:[(0,o.jsx)("div",{className:"relative w-full h-32 bg-p10-dark overflow-hidden",children:(0,o.jsx)(x.default,{src:t.image,alt:t.title,fill:!0,className:"object-cover transition-transform duration-300 ".concat(r?"scale-105":""),sizes:"450px"})}),(0,o.jsxs)("div",{className:"p-4 space-y-2.5",children:[(0,o.jsx)("h3",{className:"text-white font-poppins font-bold text-sm leading-snug line-clamp-2",children:t.title}),(0,o.jsxs)("div",{className:"flex items-center gap-2 text-p10-text-muted text-xs font-work-sans",children:[(0,o.jsx)("svg",{width:"12",height:"15",viewBox:"0 0 12 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M6 0C2.69 0 0 2.69 0 6c0 4.5 6 10 6 10s6-5.5 6-10c0-3.31-2.69-6-6-6zm0 8c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z",fill:"currentColor"})}),(0,o.jsx)("span",{children:t.name})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[(0,o.jsx)("span",{className:"text-white font-poppins font-semibold text-sm",children:t.price}),(0,o.jsxs)("span",{className:"text-p10-text-muted font-work-sans flex items-center gap-1.5",children:[(0,o.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M13 1L1 13M13 1H7M13 1V7M1 13H7M1 13V7",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),t.size]})]}),(0,o.jsx)("div",{className:"flex flex-wrap gap-1.5 pt-1",children:t.tags.map((e,t)=>(0,o.jsx)("span",{className:"bg-p10-accent/15 text-p10-text-muted text-[11px] px-2 py-0.5 rounded-md font-work-sans",children:e},t))}),(0,o.jsxs)("button",{onClick:e=>e.stopPropagation(),className:"w-full mt-3 flex items-center justify-center gap-2 bg-transparent border border-p10-text-muted/30 text-white text-xs py-2.5 rounded-md hover:bg-p10-accent/10 hover:border-p10-accent transition-all font-poppins font-semibold",children:[(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"1.5",stroke:"currentColor"})}),"Add to Preferences"]})]})]})}function E(e){let{isOpen:t,onToggle:r,selectedPropertyIndex:s,onPropertySelect:i}=e,l=(0,a.useRef)(null),c=(0,a.useRef)([]);return(0,a.useEffect)(()=>{if(null!==s&&c.current[s]&&l.current){let e=c.current[s],t=l.current;if(e){let r=e.offsetTop,o=e.offsetHeight,a=t.clientHeight,n=t.scrollTop;(r<n||r+o>n+a)&&t.scrollTo({top:r-a/2+o/2,behavior:"smooth"})}}},[s]),(0,o.jsxs)(o.Fragment,{children:[!t&&(0,o.jsx)("button",{onClick:()=>r(!0),className:"fixed left-4 top-4 z-40 w-10 h-10 bg-p10-border rounded transition-colors flex items-center justify-center text-white hover:bg-p10-maya/20 hover:text-p10-maya","aria-label":"Open sidebar",children:(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,o.jsxs)("div",{className:"fixed left-0 top-0 h-screen w-[440px] bg-p10-blue overflow-y-auto z-40 flex flex-col transition-transform duration-300 ease-in-out ".concat(t?"translate-x-0":"-translate-x-full"),children:[(0,o.jsxs)("div",{className:"w-full bg-p10-dark flex items-center justify-between px-6 py-5 flex-shrink-0",children:[(0,o.jsx)("div",{className:"flex items-center gap-3",children:(0,o.jsx)("span",{className:"text-white font-poppins font-bold text-lg tracking-wide",children:"LOGO"})}),(0,o.jsx)("button",{onClick:()=>r(!1),className:"group w-10 h-10 bg-p10-border rounded transition-colors flex items-center justify-center text-white hover:bg-p10-maya/20 hover:text-p10-maya","aria-label":"Close sidebar",children:(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M15 18L9 12L15 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),(0,o.jsx)("div",{ref:l,className:"flex-1 overflow-y-auto px-3 py-6 space-y-5",children:n.map((e,t)=>(0,o.jsx)("div",{ref:e=>{c.current[t]=e},children:(0,o.jsx)(L,{property:e,isSelected:s===t,onClick:()=>i(t)})},t))})]})]})}function I(){let[e,t]=(0,a.useState)(!0),[r,s]=(0,a.useState)(null),x=(0,a.useCallback)(e=>{console.error("Map error:",e)},[]),{mapContainer:L,isLoading:I,error:w,flyToProperty:T}=function(e){let{locations:t,selectedPropertyIndex:r,onPropertySelect:o,onError:n}=e,s=(0,a.useRef)(null),y=(0,a.useRef)(null),x=(0,a.useRef)(!1),L=(0,a.useRef)(!1),[E,I]=(0,a.useState)(!0),[w,T]=(0,a.useState)(null),O=(0,a.useCallback)(e=>{if(!y.current||!t[e])return;let r=t[e];y.current.flyTo({center:r.coordinates,zoom:f.FLY_TO_ZOOM,duration:f.FLY_TO_DURATION,curve:f.FLY_TO_CURVE,essential:!0})},[t]);return(0,a.useEffect)(()=>{console.log("[MAP STATE] isLoading changed to:",E)},[E]),(0,a.useEffect)(()=>{if(!y.current||!L.current)return;let e={type:"FeatureCollection",features:t.map((e,t)=>({type:"Feature",properties:{index:t,name:e.name,title:e.title,isSelected:t===r},geometry:{type:"Point",coordinates:e.coordinates}}))},o=y.current.getSource("property-markers");o&&o.setData(e)},[r,t]),(0,a.useEffect)(()=>{if(x.current||!s.current)return;let e=!0;return x.current=!0,(async()=>{if(s.current&&e)try{let r=function(){let e="eCZZ2tIYqyT9UxcwT28y",t=g.env.MAPTILER_STYLE_ID||"019b0c46-bf3e-725a-ab49-336f71fa22af";if(!e)throw Error("NEXT_PUBLIC_MAPTILER_API_KEY is not set in environment variables");return"https://api.maptiler.com/maps/".concat(t,"/style.json?key=").concat(e)}();console.log("[MAP] Initializing map instance...");let a=new(i()).Map({container:s.current,style:r,center:l.INITIAL_CENTER,zoom:l.INITIAL_ZOOM,minZoom:l.MIN_ZOOM,maxZoom:l.MAX_ZOOM,attributionControl:!1});y.current=a,console.log("[MAP] Map instance created"),a.on("error",t=>{var r;if(!e)return;console.error("Map error event:",t);let o=Error("Map failed to load: ".concat((null==(r=t.error)?void 0:r.message)||"Unknown error"));T(o),I(!1),null==n||n(o)}),a.on("load",async()=>{if((console.log("[MAP] Map load event fired"),e&&y.current)&&(a.isStyleLoaded()||await new Promise(e=>{let t=()=>{a.isStyleLoaded()?e():setTimeout(t,50)};t()}),e))try{var r,s,i;let a=await fetch("/fl-state.json");if(!e)return;if(!a.ok)throw Error("Failed to load Florida boundary: ".concat(a.statusText));let n=await a.json();if(!e||!y.current)return;let l=(r=function(e){var t,r;if(!e)throw Error("Florida boundary data is missing");if("FeatureCollection"===e.type){if(!e.features||0===e.features.length)throw Error("FeatureCollection has no features");let r=e.features[0];if(!(null==r||null==(t=r.geometry)?void 0:t.coordinates))throw Error("Feature is missing geometry or coordinates");return r.geometry.coordinates}if("Feature"===e.type){if(!(null==(r=e.geometry)?void 0:r.coordinates))throw Error("Feature is missing geometry or coordinates");return e.geometry.coordinates}if(e.coordinates)return e.coordinates;throw Error("Invalid GeoJSON structure: unable to extract coordinates")}(n),{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[...h],...Array.isArray(null==(i=r[0])||null==(s=i[0])?void 0:s[0])?r.flatMap(e=>e.map(e=>e.slice().reverse())):r.map(e=>e.slice().reverse())]}});if(!y.current.isStyleLoaded())return;console.log("[MAP] Adding masking layers..."),y.current.addLayer({id:"dark-mask",type:"fill",source:{type:"geojson",data:l},paint:{"fill-color":c.DARK_BACKGROUND,"fill-opacity":d.DARK_MASK}}),console.log("[MAP] ✓ Added dark-mask layer"),y.current.addLayer({id:"florida-fill",type:"fill",source:{type:"geojson",data:n},paint:{"fill-color":c.FLORIDA_FILL,"fill-opacity":d.FLORIDA_FILL}}),console.log("[MAP] ✓ Added florida-fill layer"),y.current.addLayer({id:"florida-outline-shadow",type:"line",source:{type:"geojson",data:n},paint:{"line-color":c.OUTLINE_SHADOW,"line-width":u.OUTLINE_SHADOW,"line-opacity":d.OUTLINE_SHADOW,"line-offset":p.SHADOW}}),y.current.addLayer({id:"florida-outline-highlight",type:"line",source:{type:"geojson",data:n},paint:{"line-color":c.OUTLINE_HIGHLIGHT,"line-width":u.OUTLINE_HIGHLIGHT,"line-opacity":d.OUTLINE_HIGHLIGHT,"line-offset":p.HIGHLIGHT}}),y.current.addLayer({id:"florida-outline",type:"line",source:{type:"geojson",data:n},paint:{"line-color":c.OUTLINE_CORE,"line-width":u.OUTLINE_MAIN,"line-opacity":d.OUTLINE_MAIN}}),console.log("[MAP] ✓ Added florida-outline layer");let g={type:"FeatureCollection",features:t.map((e,t)=>({type:"Feature",properties:{index:t,name:e.name,title:e.title,isSelected:!1},geometry:{type:"Point",coordinates:e.coordinates}}))};y.current.addSource("property-markers",{type:"geojson",data:g}),y.current.addLayer({id:"markers-glow",type:"circle",source:"property-markers",paint:{"circle-radius":["case",["get","isSelected"],f.OUTER_RING_RADIUS_SELECTED,f.OUTER_RING_RADIUS],"circle-color":["case",["get","isSelected"],m.SELECTED_GLOW,m.GLOW],"circle-opacity":["case",["get","isSelected"],m.SELECTED_GLOW_OPACITY,m.GLOW_OPACITY],"circle-blur":.8}}),y.current.addLayer({id:"markers-main",type:"circle",source:"property-markers",paint:{"circle-radius":["case",["get","isSelected"],f.RADIUS_SELECTED,f.RADIUS],"circle-color":["case",["get","isSelected"],m.SELECTED_FILL,m.FILL],"circle-opacity":["case",["get","isSelected"],m.SELECTED_FILL_OPACITY,m.FILL_OPACITY],"circle-stroke-width":["case",["get","isSelected"],f.STROKE_WIDTH_SELECTED,f.STROKE_WIDTH],"circle-stroke-color":m.STROKE,"circle-stroke-opacity":m.STROKE_OPACITY}}),console.log("[MAP] ✓ Added marker layers"),y.current.on("click","markers-main",e=>{var t;if(!e.features||0===e.features.length)return;let r=null==(t=e.features[0].properties)?void 0:t.index;"number"==typeof r&&o(r)}),y.current.on("mouseenter","markers-main",()=>{y.current&&(y.current.getCanvas().style.cursor="pointer")}),y.current.on("mouseleave","markers-main",()=>{y.current&&(y.current.getCanvas().style.cursor="")}),y.current.on("click",e=>{if(!y.current)return;let t=y.current.queryRenderedFeatures(e.point,{layers:["markers-main"]});0===t.length&&o(null)}),L.current=!0,console.log("[MAP] ✓ Marker click handlers added");let x=!1,E=0,w=()=>{if(!e||!y.current||x)return;E++,console.log("[MAP] Render check #".concat(E," - checking for layers..."));let t=y.current.getLayer("dark-mask"),r=y.current.getLayer("florida-fill"),o=y.current.getLayer("florida-outline");console.log("[MAP] Layer status:",{darkMask:!!t,floridaFill:!!r,floridaOutline:!!o}),t&&r&&o&&(x=!0,console.log("[MAP] ✓ All layers confirmed! Preparing to reveal map..."),y.current&&y.current.off("render",w),requestAnimationFrame(()=>{console.log("[MAP] First RAF complete"),requestAnimationFrame(()=>{e&&(console.log("[MAP] Second RAF complete - hiding loader and revealing map"),I(!1))})}))};console.log("[MAP] Setting up render listeners..."),y.current.on("render",w),y.current.once("idle",()=>{console.log("[MAP] Map idle event fired"),w()})}catch(r){if(!e)return;let t=r instanceof Error?r:Error("Failed to load Florida boundary");T(t),null==n||n(t)}})}catch(r){if(!e)return;let t=r instanceof Error?r:Error("Failed to initialize map");T(t),I(!1),null==n||n(t)}})(),()=>{e=!1,y.current&&(y.current.remove(),y.current=null),x.current=!1}},[t,n,o]),{mapContainer:s,map:y,isLoading:E,error:w,flyToProperty:O}}({locations:n,selectedPropertyIndex:r,onPropertySelect:(0,a.useCallback)(e=>{s(e)},[]),onError:x}),O=(0,a.useCallback)(e=>{s(e),T(e)},[T]),_=(0,a.useCallback)(e=>{t(e)},[]);return(0,o.jsxs)("div",{className:"w-full h-screen relative bg-p10-dark",children:[(0,o.jsxs)("div",{className:"absolute inset-0",children:[(0,o.jsx)("div",{ref:L,className:"w-full h-full"}),(0,o.jsxs)("div",{className:"absolute inset-0 bg-p10-dark flex flex-col items-center justify-center gap-4 z-10 transition-opacity duration-500 ".concat(I?"opacity-100":"opacity-0 pointer-events-none"),children:[(0,o.jsx)(y.A,{}),(0,o.jsx)("p",{className:"text-p10-text-muted text-sm",children:"Loading map..."})]}),w&&(0,o.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-p10-dark text-white p-8 text-center z-10",children:[(0,o.jsx)("h2",{className:"mb-4 text-xl font-semibold",children:"Unable to load map"}),(0,o.jsx)("p",{className:"text-p10-text-muted",children:w.message})]})]}),(0,o.jsx)(E,{isOpen:e,onToggle:_,selectedPropertyIndex:r,onPropertySelect:O})]})}}}]);